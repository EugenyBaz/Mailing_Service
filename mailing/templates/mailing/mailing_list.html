{% extends 'mailing/base.html' %}
{% block content %}
<div class="container my-2">
    <table class="table table-striped table-hover">
        <div class="alert alert-info" role="alert">
            <h4>Количество рассылок: {{ mailings.count }} шт.</h4>
            <h4>Активных рассылок: {{ active_mailings }} шт.</h4>
            <h4>Количество уникальных получателей: {{ unique_recipients }} шт.</h4>
        </div>

        {% for mailing in mailings %}
            <article>
                <h2><a href="{% url 'mailing:mailing_detail' mailing.id %}" style="font-size: 18px; color: gray;">{{ mailing.message.subject_letter }}</a></h2> <!-- Выводим тему письма -->
                <div class="d-flex align-items-center justify-content-between">
                    <ul class="list-inline">
                        <li class="list-inline-item">Статус : {{ mailing.get_status_display }}</li>
                        <li class="list-inline-item">Дата и время первой отправки : {{ mailing.date_and_time_first_launched }}</li>
                    </ul>

                    <!-- Кнопки размещены справа -->
                    <div class="float-end">
                        <a href="{% url 'mailing:manual_launch' mailing.id %}" class="btn btn-success">Запустить вручную</a>

                        <!-- Кнопка отмены доступна только менеджерам -->
                        {% if is_manager %}
                            <a href="{% url 'mailing:cancel_mailing' mailing.id %}" class="btn btn-danger ms-2">Отменить рассылку</a>
                        {% endif %}
                    </div>
                </div>
            </article>
        {% empty %}
            <p>Нет активных рассылок.</p>
        {% endfor %}
    </table>
</div>
{% endblock %}